---
title: With Python
---

Chainlit supports streaming with any Python code. Here is an example with `openai`.

```python
import openai
from chainlit import on_message, start_stream, send_token, send_message, LLMSettings

openai.api_key = "YOUR_API_KEY"

model_name = "text-davinci-003"

settings = {
    "temperature": 0.7,
    "max_tokens": 500,
    "top_p": 1,
    "frequency_penalty": 0,
    "presence_penalty": 0,
    "stop": ["```"]
}

prompt = """Answer the following question:
{question}
"""


@on_message
def main(message: str):
    msg = ""
    fromatted_prompt = prompt.format(question=message)
    start_stream()

    for resp in openai.Completion.create(model=model_name,
                                         prompt=fromatted_prompt,
                                         stream=True,
                                         **settings):
        token = resp.choices[0].text
        send_token(token)
        msg += token

    send_message(
        content=msg,
        prompt=fromatted_prompt,
        llm_settings=LLMSettings(model_name=model_name, **settings),
        end_stream=True
    )
```

## Result
<video controls height="200" src="https://chainlit-cloud.s3.eu-west-3.amazonaws.com/docs/python_streaming.mp4" />



